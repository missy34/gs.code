<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/gmaps_2.css">
    <title>mishiMap</title>
    <style>
    </style>

</head>
        
<body>
    <div id="map"></div>

    <script>
        var map;

        function initMap() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(  // 取得=get  現在 位置=Current Position
            function(position) { // 関数（位置）
                // 緯度・経度を変数に格納
                var mapLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                // マップオプションを変数に格納
                var mapOptions = {
                zoom : 15,          // 拡大倍率
                center : mapLatLng  // 緯度・経度
                };

                // マップオブジェクト作成
                var map = new google.maps.Map(document.getElementById("map"), // マップを表示する要素
                mapOptions         // マップオプション
                );

                // マップにマーカーを表示する
                var marker = new google.maps.Marker({
                map : map,             // 対象の地図オブジェクト
                position : mapLatLng   // 緯度・経度
                });

            },
        
            function(error) {
                switch(error.code) {
                case 1: alert("位置情報の利用が許可されていません");
                    break;
                case 2: alert("現在位置が取得できませんでした");
                    break;
                case 3: alert("タイムアウトになりました");
                    break;
                default: alert("その他のエラー(エラーコード:"+error.code+")");
                    break;
                }
            }
            );
                } else {
                    alert("この端末では位置情報が取得できません");
                }
        }
    </script> 

    <script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyB3kx-qpNmBNAgwpNDWE8YwiUJXfhcUZ7Y&callback=initMap" async defer></script>

</body>
</html>